<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Lab02 虚拟化实验 # 实验目标 # 实施计算虚拟化，安装配置环境，熟悉计算虚拟化的概念，理解基本操作，掌握基础知识。 理解集中管理对于虚拟化的作用，通过部署集中vCenter体验集群的设置，分布式交换机的设置，了解主机从不同网络进行迁移的实际需求。 实验内容 # 按照实验指南的指导，完成实验。 按照实验报告模板，撰写实验报告，将重要的实验步骤截图，填入实验报告中，并回答相应问题。 本次实验以小组形式进行，虚拟机已分发至每组第一位同学的账户中，每组一台虚拟机，实验报告每个人都需要提交，同组的实验报告内容可以一致
请在云平台作业提交截止时间之前，将作业提交到云平台，命名为：lab02-学号-姓名.pdf的格式。
Hypervisor # 我们知道，一台计算机一般有以下的结构：
操作系统负责管理硬件资源（CPU，内存，硬盘等），并向上提供相应的系统调用，供具体的应用程序使用。
而我们平常提到的操作系统的虚拟化，本质上就是要模拟出一套硬件（包括虚拟CPU，虚拟内存，虚拟硬盘等），然后在这一套虚拟的硬件的基础上部署客户操作系统。客户操作系统完全不需要做任何修改，即可在这个“虚拟的机器”中顺利执行。但客户操作系统的运行结果（比如接收键盘输入，输出图像和声音等），最终都是要靠原始的“实实在在”的硬件（物理机）来完成的。也就是说，需要有那么一个结构，能够将这个“虚拟的机器”的行为翻译到物理机的行为（比如将虚拟CPU的指令翻译到物理机的CPU指令）。负责做这件事情的结构被称为Hypervisor，又称为虚拟机监控器（virtual machine monitor，缩写为 VMM）。
根据工作方式的不同，Hypervisor分为以下两种。
第一种是我们比较熟悉的情况，本质上就是在主操作系统（Host Operating System）上安装了一个虚拟化软件，它来负责充当虚拟机的管理者，并通过主操作系统的系统调用来完成对物理机硬件的使用。VMware Workstation、Virtual Box、Qemu等都属这类虚拟化软件。除了这个虚拟化软件之外，主操作系统上还会运行其他“正常”的应用程序，比如，你在用VMware Workstation的同时还能听歌聊天等。
第二种Hypervisor则直接舍弃了主操作系统（因为毕竟隔着一层，性能会有损失），而是直接把Hypervisor部署在硬件上。在这种情况下，物理机变成了更纯粹的“为虚拟化而生”的机器。Hypervisor能够直接与硬件沟通，其实在某种程度上也承担了主操作系统的角色（管理硬件），因此，我们也可以把这种Hypervisor看作是一种为虚拟化特制的操作系统。这其中典型的就是VMware ESXi。
因为我们不可能要求每位同学都制备一套硬件来安装学习VMware ESXi，所以需要首先使用VMware Workstation来模拟出一套硬件。但VMware Workstation仅仅起一个前置作用，在实际的实验中并不会涉及到。请大家首先理清这层关系。
实验指南 # 0. 安装VMware Workstation # 使用分配的虚拟机的桌面上的安装包安装即可。
安装完成后需重启机器。
打开VMware Workstation时， 选择试用即可。
1. 安装VMware ESXi # 使用桌面上的ESXi镜像VMware-VMvisor-Installer-6.7.0.update03-19898906.x86_64-DellEMC_Customized-A18.iso创建虚拟机。
注意选择客户操作系统的类型。
虚拟机创建完成后，直接打开电源即可启动ESXi操作系统的安装流程，这一过程可能需要等待较长时间。
安装流程中总是保持默认选项即可，其中设置的root密码应至少包含字母、数字和特殊符号，并且请务必牢记设置的root密码。
在此流程中，可能需要使用使用到某些快捷键，这些快捷键可能会首先被你本机的操作系统捕获，在本机的系统设置中暂时屏蔽该快捷键即可。
安装完成后，可以看到如下界面。
可以看到，ESXi系统获得了一个IPv4地址192.168.80.128，并且这个地址是通过DHCP的方式获得的。这里用到的DHCP服务器其实是VMware Workstation内置的。也就是说，192.168.80.128这个地址只有在安装VMware Workstation的机器上才是有效的。
2. 访问ESXi # 可以直接使用浏览器访问ESXi。访问的地址就是ESXi的地址，用户名和密码与vSphere Client的相同。
如下图所示，可以为ESXi分配许可证。
可用的KEY：
0A65P-00HD0-3Z5M1-M097M-22P7H 3. 观察和体验vSphere Client提供的功能 # Client侧界面主要包含导航器、主体内容和任务事件这三部分。"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Lab02 虚拟化实验"><meta property="og:description" content="Lab02 虚拟化实验 # 实验目标 # 实施计算虚拟化，安装配置环境，熟悉计算虚拟化的概念，理解基本操作，掌握基础知识。 理解集中管理对于虚拟化的作用，通过部署集中vCenter体验集群的设置，分布式交换机的设置，了解主机从不同网络进行迁移的实际需求。 实验内容 # 按照实验指南的指导，完成实验。 按照实验报告模板，撰写实验报告，将重要的实验步骤截图，填入实验报告中，并回答相应问题。 本次实验以小组形式进行，虚拟机已分发至每组第一位同学的账户中，每组一台虚拟机，实验报告每个人都需要提交，同组的实验报告内容可以一致
请在云平台作业提交截止时间之前，将作业提交到云平台，命名为：lab02-学号-姓名.pdf的格式。
Hypervisor # 我们知道，一台计算机一般有以下的结构：
操作系统负责管理硬件资源（CPU，内存，硬盘等），并向上提供相应的系统调用，供具体的应用程序使用。
而我们平常提到的操作系统的虚拟化，本质上就是要模拟出一套硬件（包括虚拟CPU，虚拟内存，虚拟硬盘等），然后在这一套虚拟的硬件的基础上部署客户操作系统。客户操作系统完全不需要做任何修改，即可在这个“虚拟的机器”中顺利执行。但客户操作系统的运行结果（比如接收键盘输入，输出图像和声音等），最终都是要靠原始的“实实在在”的硬件（物理机）来完成的。也就是说，需要有那么一个结构，能够将这个“虚拟的机器”的行为翻译到物理机的行为（比如将虚拟CPU的指令翻译到物理机的CPU指令）。负责做这件事情的结构被称为Hypervisor，又称为虚拟机监控器（virtual machine monitor，缩写为 VMM）。
根据工作方式的不同，Hypervisor分为以下两种。
第一种是我们比较熟悉的情况，本质上就是在主操作系统（Host Operating System）上安装了一个虚拟化软件，它来负责充当虚拟机的管理者，并通过主操作系统的系统调用来完成对物理机硬件的使用。VMware Workstation、Virtual Box、Qemu等都属这类虚拟化软件。除了这个虚拟化软件之外，主操作系统上还会运行其他“正常”的应用程序，比如，你在用VMware Workstation的同时还能听歌聊天等。
第二种Hypervisor则直接舍弃了主操作系统（因为毕竟隔着一层，性能会有损失），而是直接把Hypervisor部署在硬件上。在这种情况下，物理机变成了更纯粹的“为虚拟化而生”的机器。Hypervisor能够直接与硬件沟通，其实在某种程度上也承担了主操作系统的角色（管理硬件），因此，我们也可以把这种Hypervisor看作是一种为虚拟化特制的操作系统。这其中典型的就是VMware ESXi。
因为我们不可能要求每位同学都制备一套硬件来安装学习VMware ESXi，所以需要首先使用VMware Workstation来模拟出一套硬件。但VMware Workstation仅仅起一个前置作用，在实际的实验中并不会涉及到。请大家首先理清这层关系。
实验指南 # 0. 安装VMware Workstation # 使用分配的虚拟机的桌面上的安装包安装即可。
安装完成后需重启机器。
打开VMware Workstation时， 选择试用即可。
1. 安装VMware ESXi # 使用桌面上的ESXi镜像VMware-VMvisor-Installer-6.7.0.update03-19898906.x86_64-DellEMC_Customized-A18.iso创建虚拟机。
注意选择客户操作系统的类型。
虚拟机创建完成后，直接打开电源即可启动ESXi操作系统的安装流程，这一过程可能需要等待较长时间。
安装流程中总是保持默认选项即可，其中设置的root密码应至少包含字母、数字和特殊符号，并且请务必牢记设置的root密码。
在此流程中，可能需要使用使用到某些快捷键，这些快捷键可能会首先被你本机的操作系统捕获，在本机的系统设置中暂时屏蔽该快捷键即可。
安装完成后，可以看到如下界面。
可以看到，ESXi系统获得了一个IPv4地址192.168.80.128，并且这个地址是通过DHCP的方式获得的。这里用到的DHCP服务器其实是VMware Workstation内置的。也就是说，192.168.80.128这个地址只有在安装VMware Workstation的机器上才是有效的。
2. 访问ESXi # 可以直接使用浏览器访问ESXi。访问的地址就是ESXi的地址，用户名和密码与vSphere Client的相同。
如下图所示，可以为ESXi分配许可证。
可用的KEY：
0A65P-00HD0-3Z5M1-M097M-22P7H 3. 观察和体验vSphere Client提供的功能 # Client侧界面主要包含导航器、主体内容和任务事件这三部分。"><meta property="og:type" content="article"><meta property="og:url" content="https://scs.buaa.edu.cn/doc/ns-labs/table-of-contents/virtualization/"><meta property="article:section" content="ns-labs"><meta property="article:modified_time" content="2022-10-29T21:04:57+08:00"><title>Lab02 虚拟化实验 | 软院云平台文档</title><link rel=manifest href=/doc/manifest.json><link rel=icon href=/doc/favicon.png type=image/x-icon><link rel=stylesheet href=/doc/book.min.46181bc93375ba932026e753b37c40e6ff8bb16a9ef770c78bcc663e4577b1ba.css integrity="sha256-RhgbyTN1upMgJudTs3xA5v+LsWqe93DHi8xmPkV3sbo=" crossorigin=anonymous><script defer src=/doc/flexsearch.min.js></script>
<script defer src=/doc/en.search.min.94cbc21e10abb603f74134759bbce32e1b470037e88d1b121ed86edcf448cf23.js integrity="sha256-lMvCHhCrtgP3QTR1m7zjLhtHADfojRsSHthu3PRIzyM=" crossorigin=anonymous></script>
<script defer src=/doc/sw.min.c6e13cf2801d746c82b18aace5ed50254554a6ab28bdd01a6fd9fdc0d082e427.js integrity="sha256-xuE88oAddGyCsYqs5e1QJUVUpqsovdAab9n9wNCC5Cc=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/doc/><span>软院云平台文档</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=https://scs.buaa.edu.cn/doc/02_bugit/>BuGit代码托管与自动部署平台</a><ul><li><a href=https://scs.buaa.edu.cn/doc/02_bugit/build_deploy/>自动构建与部署</a></li></ul></li><li><a href=https://scs.buaa.edu.cn/doc/01_common/>云平台使用手册</a><ul><li><a href=https://scs.buaa.edu.cn/doc/01_common/virtual_machine_help/>虚拟机使用说明</a></li></ul></li><li><a href=https://scs.buaa.edu.cn/doc/cloud-labs/>大数据和云计算综合实践</a><ul><li><a href=https://scs.buaa.edu.cn/doc/cloud-labs/cloud/>云计算实验</a><ul><li><a href=https://scs.buaa.edu.cn/doc/cloud-labs/cloud/container_docker/>容器与Docker综合实验</a></li><li><a href=https://scs.buaa.edu.cn/doc/cloud-labs/cloud/kube-single-3/>Kubernetes实验（三）</a></li><li><a href=https://scs.buaa.edu.cn/doc/cloud-labs/cloud/cloud_lab/>云PaaS平台开发</a></li><li><a href=https://scs.buaa.edu.cn/doc/cloud-labs/cloud/appendix_create_kubernetes/>附录：创建Kubernetes集群</a></li><li><a href=https://scs.buaa.edu.cn/doc/cloud-labs/cloud/faq/>FAQ</a></li></ul></li></ul></li><li><a href=https://scs.buaa.edu.cn/doc/ns-labs/>网络存储实验规划</a><ul><li><a href=https://scs.buaa.edu.cn/doc/ns-labs/table-of-contents/>Table of Contents</a><ul><li><a href=https://scs.buaa.edu.cn/doc/ns-labs/table-of-contents/raid/>Lab01 RAID 阵列</a></li><li><a href=https://scs.buaa.edu.cn/doc/ns-labs/table-of-contents/virtualization/ class=active>Lab02 虚拟化实验</a></li></ul></li><li><a href=https://scs.buaa.edu.cn/doc/ns-labs/resources/>Resources</a><ul><li><a href=https://scs.buaa.edu.cn/doc/ns-labs/resources/os/>操作系统</a></li></ul></li></ul></li></ul><ul><li><a href=https://github.com/bugitt/doc target=_blank rel=noopener>Github</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/doc/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Lab02 虚拟化实验</strong>
<label for=toc-control><img src=/doc/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#lab02-虚拟化实验>Lab02 虚拟化实验</a><ul><li><a href=#实验目标>实验目标</a></li><li><a href=#实验内容>实验内容</a><ul><li><a href=#hypervisor>Hypervisor</a></li></ul></li><li><a href=#实验指南>实验指南</a><ul><li><a href=#0-安装vmware-workstation>0. 安装VMware Workstation</a></li><li><a href=#1-安装vmware-esxi>1. 安装VMware ESXi</a></li><li><a href=#2-访问esxi>2. 访问ESXi</a></li><li><a href=#3-观察和体验vsphere-client提供的功能>3. 观察和体验vSphere Client提供的功能</a></li><li><a href=#4-新建和安装虚拟机>4. 新建和安装虚拟机</a></li><li><a href=#5-虚拟机文件系统格式和种类>5. 虚拟机文件系统格式和种类</a></li><li><a href=#6-虚拟机导出>6. 虚拟机导出</a></li><li><a href=#7-vmware-tools选做>7. VMware Tools（选做）</a></li><li><a href=#8-角色和用户选做>8. 角色和用户（选做）</a></li><li><a href=#9-创建与配置集群选做>9. 创建与配置集群（选做）</a></li><li><a href=#10-分布式交换机选做>10. 分布式交换机（选做）</a></li></ul></li><li><a href=#实验报告模板>实验报告模板</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=lab02-虚拟化实验>Lab02 虚拟化实验
<a class=anchor href=#lab02-%e8%99%9a%e6%8b%9f%e5%8c%96%e5%ae%9e%e9%aa%8c>#</a></h1><h2 id=实验目标>实验目标
<a class=anchor href=#%e5%ae%9e%e9%aa%8c%e7%9b%ae%e6%a0%87>#</a></h2><ol><li>实施计算虚拟化，安装配置环境，熟悉计算虚拟化的概念，理解基本操作，掌握基础知识。</li><li>理解集中管理对于虚拟化的作用，通过部署集中vCenter体验集群的设置，分布式交换机的设置，了解主机从不同网络进行迁移的实际需求。</li></ol><h2 id=实验内容>实验内容
<a class=anchor href=#%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9>#</a></h2><ol><li>按照实验指南的指导，完成实验。</li><li>按照实验报告模板，撰写实验报告，将重要的实验步骤截图，填入实验报告中，并回答相应问题。</li></ol><p>本次实验以小组形式进行，虚拟机已分发至每组第一位同学的账户中，<strong>每组一台</strong>虚拟机，实验报告每个人都需要提交，同组的实验报告内容可以一致</p><p>请在云平台作业提交截止时间之前，将作业提交到云平台，命名为：<code>lab02-学号-姓名.pdf</code>的格式。</p><h3 id=hypervisor>Hypervisor
<a class=anchor href=#hypervisor>#</a></h3><p>我们知道，一台计算机一般有以下的结构：</p><p><img src=./img/image-20211107205517736.png alt=image-20211107213246128></p><p>操作系统负责管理硬件资源（CPU，内存，硬盘等），并向上提供相应的系统调用，供具体的应用程序使用。</p><p>而我们平常提到的操作系统的虚拟化，本质上就是要模拟出一套硬件（包括虚拟CPU，虚拟内存，虚拟硬盘等），然后在这一套虚拟的硬件的基础上部署客户操作系统。客户操作系统完全不需要做任何修改，即可在这个“虚拟的机器”中顺利执行。但客户操作系统的运行结果（比如接收键盘输入，输出图像和声音等），最终都是要靠原始的“实实在在”的硬件（物理机）来完成的。也就是说，需要有那么一个结构，能够将这个“虚拟的机器”的行为翻译到物理机的行为（比如将虚拟CPU的指令翻译到物理机的CPU指令）。负责做这件事情的结构被称为Hypervisor，又称为虚拟机监控器（virtual machine monitor，缩写为 VMM）。</p><p>根据工作方式的不同，Hypervisor分为以下两种。</p><p><img src=./img/image-20211107213246128.png alt=image-20211107213246128></p><p>第一种是我们比较熟悉的情况，本质上就是在主操作系统（Host Operating System）上安装了一个虚拟化软件，它来负责充当虚拟机的管理者，并通过主操作系统的系统调用来完成对物理机硬件的使用。VMware Workstation、Virtual Box、Qemu等都属这类虚拟化软件。除了这个虚拟化软件之外，主操作系统上还会运行其他“正常”的应用程序，比如，你在用VMware Workstation的同时还能听歌聊天等。</p><p>第二种Hypervisor则直接舍弃了主操作系统（因为毕竟隔着一层，性能会有损失），而是直接把Hypervisor部署在硬件上。在这种情况下，物理机变成了更纯粹的“为虚拟化而生”的机器。Hypervisor能够直接与硬件沟通，其实在某种程度上也承担了主操作系统的角色（管理硬件），因此，我们也可以把这种Hypervisor看作是一种为虚拟化特制的操作系统。这其中典型的就是VMware ESXi。</p><p>因为我们不可能要求每位同学都制备一套硬件来安装学习VMware ESXi，所以需要首先使用VMware Workstation来模拟出一套硬件。但VMware Workstation仅仅起一个前置作用，在实际的实验中并不会涉及到。请大家首先理清这层关系。</p><h2 id=实验指南>实验指南
<a class=anchor href=#%e5%ae%9e%e9%aa%8c%e6%8c%87%e5%8d%97>#</a></h2><h3 id=0-安装vmware-workstation>0. 安装VMware Workstation
<a class=anchor href=#0-%e5%ae%89%e8%a3%85vmware-workstation>#</a></h3><p>使用分配的虚拟机的桌面上的安装包安装即可。</p><p>安装完成后需重启机器。</p><p>打开VMware Workstation时， 选择试用即可。</p><p><img src=./img/image-20211107120821035.png alt=image-20211107120821035></p><h3 id=1-安装vmware-esxi>1. 安装VMware ESXi
<a class=anchor href=#1-%e5%ae%89%e8%a3%85vmware-esxi>#</a></h3><p>使用桌面上的ESXi镜像<code>VMware-VMvisor-Installer-6.7.0.update03-19898906.x86_64-DellEMC_Customized-A18.iso</code>创建虚拟机。</p><p>注意选择客户操作系统的类型。</p><p><img src=./img/image-20211107121139109.png alt=image-20211107121139109></p><p>虚拟机创建完成后，直接打开电源即可启动ESXi操作系统的安装流程，这一过程可能需要等待较长时间。</p><p>安装流程中总是保持默认选项即可，其中设置的root密码应至少包含字母、数字和特殊符号，并且请务必牢记设置的root密码。</p><p>在此流程中，可能需要使用使用到某些快捷键，这些快捷键可能会首先被你本机的操作系统捕获，在本机的系统设置中暂时屏蔽该快捷键即可。</p><p><img src=./img/image-20211107122136324.png alt=image-20211107122136324></p><p>安装完成后，可以看到如下界面。</p><p><img src=./img/image-20211107163915642.png alt=image-20211107163915642></p><p>可以看到，ESXi系统获得了一个IPv4地址<code>192.168.80.128</code>，并且这个地址是通过<code>DHCP</code>的方式获得的。这里用到的DHCP服务器其实是VMware Workstation内置的。也就是说，<code>192.168.80.128</code>这个地址只有在安装VMware Workstation的机器上才是有效的。</p><h3 id=2-访问esxi>2. 访问ESXi
<a class=anchor href=#2-%e8%ae%bf%e9%97%aeesxi>#</a></h3><p>可以直接使用浏览器访问ESXi。访问的地址就是ESXi的地址，用户名和密码与vSphere Client的相同。</p><p><img src=./img/image-20211107165815482.png alt=image-20211107165815482></p><p>如下图所示，可以为ESXi分配许可证。</p><p>可用的KEY：</p><pre tabindex=0><code>0A65P-00HD0-3Z5M1-M097M-22P7H
</code></pre><p><img src=./img/image-20211107170758629.png alt=image-20211107170758629></p><h3 id=3-观察和体验vsphere-client提供的功能>3. 观察和体验vSphere Client提供的功能
<a class=anchor href=#3-%e8%a7%82%e5%af%9f%e5%92%8c%e4%bd%93%e9%aa%8cvsphere-client%e6%8f%90%e4%be%9b%e7%9a%84%e5%8a%9f%e8%83%bd>#</a></h3><p>Client侧界面主要包含导航器、主体内容和任务事件这三部分。</p><p><img src=./img/image-20211107172432364.png alt=image-20211107172432364></p><p>请浏览左侧导航栏的不同模块和不同模块下不同选项卡的内容，对ESXi提供的功能有个大致的了解。</p><p>其中，存储部分可以查看ESXi虚拟机可访问的数据内容。</p><p><img src=./img/image-20211107173326427.png alt=image-20211107173326427></p><p>可以通过使用“数据存储浏览器”查看、下载、上传、下载“存储”中的文件。</p><h3 id=4-新建和安装虚拟机>4. 新建和安装虚拟机
<a class=anchor href=#4-%e6%96%b0%e5%bb%ba%e5%92%8c%e5%ae%89%e8%a3%85%e8%99%9a%e6%8b%9f%e6%9c%ba>#</a></h3><p>ESXi最主要的功能就是对虚拟机的管理。</p><p>vSphere Client和Web端都有显著的入口供用户创建虚拟机。</p><p><img src=./img/image-20211107180541776.png alt=image-20211107180541776></p><p>创建虚拟机的流程与使用VMware Workstation创建虚拟机没有太大区别，按照创建向导进行即可。</p><p>在创建过程的“自定义设置”阶段，需要手动配置CD/DVD驱动器，插入桌面上的CentOS或Tiny Core Linux的安装镜像，以使虚拟机在开机时，能自动进入安装镜像的安装引导界面。</p><p><img src=./img/image-20211107181242690.png alt=image-20211107181242690></p><p>当然，你也可以在虚拟机创建完成后，打开电源之前，手动编辑虚拟机配置，添加对应的镜像文件。</p><p><img src=./img/image-20211107181633965.png alt=image-20211107181633965></p><p>完成后，打开虚拟机电源，即可进入操作系统的安装引导流程。</p><h3 id=5-虚拟机文件系统格式和种类>5. 虚拟机文件系统格式和种类
<a class=anchor href=#5-%e8%99%9a%e6%8b%9f%e6%9c%ba%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%e6%a0%bc%e5%bc%8f%e5%92%8c%e7%a7%8d%e7%b1%bb>#</a></h3><p>添加虚拟机后，可以在“存储”中看到每台虚拟机中包含的文件内容。</p><p><img src=./img/image-20211107181915857.png alt=image-20211107181915857></p><p>了解这些不同格式的文件和含义和作用。</p><h3 id=6-虚拟机导出>6. 虚拟机导出
<a class=anchor href=#6-%e8%99%9a%e6%8b%9f%e6%9c%ba%e5%af%bc%e5%87%ba>#</a></h3><p>关闭虚拟机电源后，即可将虚拟机导出。</p><p><img src=./img/image-20211107182140360.png alt=image-20211107182140360></p><p>观察导出文件格式与虚拟机正常文件的区别。</p><h3 id=7-vmware-tools选做>7. VMware Tools（选做）
<a class=anchor href=#7-vmware-tools%e9%80%89%e5%81%9a>#</a></h3><p>可以在如下图所示的虚拟机控制台的“操作”选项中找到“安装VMware Tools”的选项。</p><p><img src=./img/image-20211107183923365.png alt=image-20211107183923365></p><p>点击“安装VMware Tools”后，ESXi会给虚拟机挂载一个包含了安装脚本的光盘。根据安装的操作系统的不同，具体的安装方式也有区别。对于Linux系统，可以在<code>/dev</code>目录下找到该光盘，并将其挂载到文件系统中，然后进入其中，执行安装脚本。</p><h3 id=8-角色和用户选做>8. 角色和用户（选做）
<a class=anchor href=#8-%e8%a7%92%e8%89%b2%e5%92%8c%e7%94%a8%e6%88%b7%e9%80%89%e5%81%9a>#</a></h3><p>可以在Web端创建不同的角色和用户，根据角色的不同，用户将获得不同的权限。尝试使用不同的用户账号登录Client，以体验权限限制带来的差异。</p><p><img src=https://cdn.loheagn.com/image-20211107184717658.png alt=image-20211107184717658></p><h3 id=9-创建与配置集群选做>9. 创建与配置集群（选做）
<a class=anchor href=#9-%e5%88%9b%e5%bb%ba%e4%b8%8e%e9%85%8d%e7%bd%ae%e9%9b%86%e7%be%a4%e9%80%89%e5%81%9a>#</a></h3><p>后面这两部分实验内容比较复杂，有兴趣的同学可以选择尝试。</p><p>在上面的实验中，我们进行了ESXi的部署，并使用ESXi创建了一些虚拟机。在实际应用中，往往需要多个ESXi主机组成集群，来提供更多的资源，或者提高可用性。在接下来的实验中，我们将使用vCenter Server管理多个ESXi主机，来管理所有的虚拟机和ESXi“物理机”集群。</p><ol><li><p>在VMware Workstation中新建一个新的ESXi虚拟机。该虚拟机内存可以给大一些，比如14G，磁盘大小也可以大一些，比如100G。以方便后续在其上安装vCenter Server。</p><p>可以在VMware Workstation中给机器开大内存和大容量磁盘。</p><p>因为内存和磁盘是虚拟的，所以即使本机物理内存和磁盘容量不够，也把握得住。</p><p>如果后续实验中，确实出现了内存或磁盘容量不够的情况，请联系助教扩容。</p></li><li><p>点击打开vCenter Server安装包<code>VMware-VCSA-all-6.7.0-19832974.iso</code>，可以看到README文件，其中包含着具体的安装指引。<strong>之后的安装步骤，如无特殊说明，无需改动默认选项，直接下一步即可。</strong>
<img src=https://cdn.loheagn.com/125244.png alt></p></li><li><p>我们刚刚启动的只是一个安装器程序，vCenter Server本质上还是要安装在一个特定的ESXi主机中。所以，在选择安装目标时，需要填入刚才新建的那个内存和磁盘容量都比较大的ESXi虚拟机的相关信息。
<img src=https://cdn.loheagn.com/131933.png alt></p></li><li><p>在最后的网络配置这里，选择<code>DHCP</code>
<img src=https://cdn.loheagn.com/132706.png alt></p></li><li><p>安装完成后，浏览器访问虚拟机地址或者使用vSphere Client均可访问到vCenter。
<img src=./img/%E9%A3%9E%E4%B9%A620221027-122527.jpeg alt></p></li><li><p>创建数据中心。</p></li><li><p>添加主机。把本次实验创建的两个ESXi主机都添加进去。在添加主机时会弹出安全警示，选择“是”继续添加即可。输入主机的用户名和密码，一路默认即可（一定要禁用锁定模式）。
<img src=./img/%e9%a3%9e%e4%b9%a620221027-122928.jpg alt></p></li></ol><h3 id=10-分布式交换机选做>10. 分布式交换机（选做）
<a class=anchor href=#10-%e5%88%86%e5%b8%83%e5%bc%8f%e4%ba%a4%e6%8d%a2%e6%9c%ba%e9%80%89%e5%81%9a>#</a></h3><p>在两台ESXi主机上分别启动一台Tiny Core Linux虚拟机，使用<code>ifconfig</code>命令查看这两台虚拟机的IP地址，使用<code>ping</code>命令测试两台机器之间的网络是否连通。</p><p>默认情况下，vCenter会在两台主机上创建虚拟交换机，以保证虚拟机之间的网络通信。
<img src=./img/fig4.2.png alt></p><p>如果你的集群出现网络不通的情况，可以查找相关资料，在配置好的集群上，创建分布式虚拟交换机。并分别在不同的主机上部署虚拟机，实现它们之间的网络互通。</p><h2 id=实验报告模板>实验报告模板
<a class=anchor href=#%e5%ae%9e%e9%aa%8c%e6%8a%a5%e5%91%8a%e6%a8%a1%e6%9d%bf>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span># Lab02 虚拟化实验
</span></span><span style=display:flex><span><span style=color:#66d9ef>
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>&gt; </span><span style=font-style:italic>班级：
</span></span></span><span style=display:flex><span><span style=font-style:italic></span><span style=color:#66d9ef>&gt; </span><span style=font-style:italic>学号：
</span></span></span><span style=display:flex><span><span style=font-style:italic></span><span style=color:#66d9ef>&gt; </span><span style=font-style:italic>姓名：
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## 实验内容
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>### 1. 安装VMware ESXi
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### 2. 访问ESXi
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#### ESXi分配许可证
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### 3. 观察和体验vSphere Client提供的功能
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### 4. 新建和安装虚拟机
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### 5. 虚拟机文件系统格式和种类
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#### 不同格式的文件和含义和作用
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### 6. 虚拟机导出
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#### 导出文件格式与虚拟机正常文件的区别
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### 7. VMware Tools（选做）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### 8. 角色和用户（选做）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### 9. 创建与配置集群（选做）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### 10. 分布式虚拟交换机（选做）
</span></span></span></code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/alex-shpak/hugo-book/commit/cb60699462c33eb4d9d4ff3eba727901713ba0a6 title='Last modified by “h56983577” | October 29, 2022' target=_blank rel=noopener><img src=/doc/svg/calendar.svg class=book-icon alt=Calendar>
<span>October 29, 2022</span></a></div><div><a class="flex align-center" href=https://github.com/alex-shpak/hugo-book/edit/main/exampleSite/content/ns-labs/table-of-contents/virtualization.md target=_blank rel=noopener><img src=/doc/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#lab02-虚拟化实验>Lab02 虚拟化实验</a><ul><li><a href=#实验目标>实验目标</a></li><li><a href=#实验内容>实验内容</a><ul><li><a href=#hypervisor>Hypervisor</a></li></ul></li><li><a href=#实验指南>实验指南</a><ul><li><a href=#0-安装vmware-workstation>0. 安装VMware Workstation</a></li><li><a href=#1-安装vmware-esxi>1. 安装VMware ESXi</a></li><li><a href=#2-访问esxi>2. 访问ESXi</a></li><li><a href=#3-观察和体验vsphere-client提供的功能>3. 观察和体验vSphere Client提供的功能</a></li><li><a href=#4-新建和安装虚拟机>4. 新建和安装虚拟机</a></li><li><a href=#5-虚拟机文件系统格式和种类>5. 虚拟机文件系统格式和种类</a></li><li><a href=#6-虚拟机导出>6. 虚拟机导出</a></li><li><a href=#7-vmware-tools选做>7. VMware Tools（选做）</a></li><li><a href=#8-角色和用户选做>8. 角色和用户（选做）</a></li><li><a href=#9-创建与配置集群选做>9. 创建与配置集群（选做）</a></li><li><a href=#10-分布式交换机选做>10. 分布式交换机（选做）</a></li></ul></li><li><a href=#实验报告模板>实验报告模板</a></li></ul></li></ul></nav></div></aside></main></body></html>